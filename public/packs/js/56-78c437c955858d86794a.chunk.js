(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{2685:function(t,e,n){},2740:function(t,e,n){"use strict";n(21),n(10),n(25),n(13),n(9),n(11),n(15),n(12),n(16);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r={props:{value:{type:Object,default:function(){return null}},filterAttributes:{type:Array,default:function(){return[]}},inputType:{type:String,default:"plain_text"},dataType:{type:String,default:"plain_text"},operators:{type:Array,default:function(){return[]}},dropdownValues:{type:Array,default:function(){return[]}},showQueryOperator:{type:Boolean,default:!1},v:{type:Object,default:function(){return null}},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:function(){return[]}},customAttributeType:{type:String,default:""}},computed:{attributeKey:{get:function(){return this.value?this.value.attribute_key:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{attribute_key:t}))}},filterOperator:{get:function(){return this.value?this.value.filter_operator:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{filter_operator:t}))}},values:{get:function(){return this.value?this.value.values:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{values:t}))}},query_operator:{get:function(){return this.value?this.value.query_operator:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{query_operator:t}))}},custom_attribute_type:{get:function(){return this.customAttributeType?this.customAttributeType:""},set:function(){var t=this.value||{};this.$emit("input",o(o({},t),{},{custom_attribute_type:this.customAttributeType}))}}},watch:{customAttributeType:{handler:function(t){this.value.custom_attribute_type="conversation_attribute"===t||"contact_attribute"===t?this.customAttributeType:""},immediate:!0}},methods:{removeFilter:function(){this.$emit("removeFilter")},resetFilter:function(){this.$emit("resetFilter")},getInputErrorClass:function(t,e){return t&&e?"bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50":"bg-slate-50 dark:bg-slate-800 border-slate-75 dark:border-slate-700/50"}}},s=(n(2746),n(8)),u=Object(s.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"rounded-md p-2 border border-solid",class:t.getInputErrorClass(t.v.values.$dirty,t.v.values.$error)},[e("div",{staticClass:"flex"},[t.groupedFilters?e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?n:n[0]},function(e){return t.resetFilter()}]}},t._l(t.filterGroups,(function(n,a){return e("optgroup",{key:a,attrs:{label:n.name}},t._l(n.attributes,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n            "+t._s(n.name)+"\n          ")])})),0)})),0):e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?n:n[0]},function(e){return t.resetFilter()}]}},t._l(t.filterAttributes,(function(n){return e("option",{key:n.key,attrs:{disabled:n.disabled},domProps:{value:n.key}},[t._v("\n          "+t._s(n.name)+"\n        ")])})),0),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterOperator,expression:"filterOperator"}],staticClass:"bg-white dark:bg-slate-900 max-w-[20%] mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filterOperator=e.target.multiple?n:n[0]}}},t._l(t.operators,(function(n,a){return e("option",{key:a,domProps:{value:n.value}},[t._v("\n          "+t._s(t.$t(`FILTER.OPERATOR_LABELS.${n.value}`))+"\n        ")])})),0),t._v(" "),t.showUserInput?e("div",{staticClass:"filter__answer--wrap mr-1 flex-grow"},["multi_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select",multiple:!0,"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"search_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"date"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0 datepicker",attrs:{type:"date",editable:!1},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0",attrs:{type:"text",placeholder:"Enter value"},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):t._e(),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",variant:"clear","color-scheme":"secondary"},on:{click:t.removeFilter}})],1),t._v(" "),t.v.values.$dirty&&t.v.values.$error?e("p",{staticClass:"filter-error"},[t._v("\n      "+t._s(t.$t("FILTER.EMPTY_VALUE_ERROR"))+"\n    ")]):t._e()]),t._v(" "),t.showQueryOperator?e("div",{staticClass:"flex items-center justify-center relative my-2.5 mx-0"},[e("hr",{staticClass:"w-full absolute border-b border-solid border-slate-75 dark:border-slate-800"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.query_operator,expression:"query_operator"}],staticClass:"bg-white dark:bg-slate-900 mb-0 w-auto relative text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.query_operator=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"and"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.AND"))+"\n      ")]),t._v(" "),e("option",{attrs:{value:"or"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.OR"))+"\n      ")])])]):t._e()])}),[],!1,null,"de5a525e",null);e.a=u.exports},2746:function(t,e,n){"use strict";n(2685)},2995:function(t,e,n){},2996:function(t,e,n){},3130:function(t,e,n){"use strict";n(2995)},3131:function(t,e,n){"use strict";n(2996)},3353:function(t,e,n){"use strict";n.r(e);n(37),n(45),n(42),n(13),n(9),n(11),n(15),n(12),n(16),n(10),n(27);var a=n(30),o=(n(21),n(25),n(75)),i=(n(73),n(140),n(357),n(322),n(78),n(97),n(34),n(36),n(23),n(66),n(62),n(1929)),r=n(1922),s=n(2989);function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={computed:p(p({},Object(a.mapGetters)({agents:"agents/getAgents",campaigns:"campaigns/getAllCampaigns",contacts:"contacts/getContacts",inboxes:"inboxes/getInboxes",labels:"labels/getLabels",teams:"teams/getTeams",slaPolicies:"sla/getSLA"})),{},{booleanFilterOptions:function(){return[{id:!0,name:this.$t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:this.$t("FILTER.ATTRIBUTE_LABELS.FALSE")}]},statusFilterOptions:function(){var t=this.$t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS");return[].concat(u(Object.keys(t).map((function(e){return{id:e,name:t[e].TEXT}}))),[{id:"all",name:this.$t("CHAT_LIST.FILTER_ALL")}])}}),methods:{getFileName:s.k,onEventChange:function(){this.automation.conditions=Object(s.j)(this.automation.event_name),this.automation.actions=Object(s.i)()},getAttributes:function(t){return this.automationTypes[t].conditions},getInputType:function(t){var e=Object(s.n)(this.allCustomAttributes,t);return e?Object(s.h)(e.attribute_display_type):this.getAutomationType(t).inputType},getOperators:function(t){if("edit"===this.mode){var e=Object(s.n)(this.allCustomAttributes,t);if(e)return Object(s.l)(e.attribute_display_type)}return this.getAutomationType(t).filterOperators},getAutomationType:function(t){return this.automationTypes[this.automation.event_name].conditions.find((function(e){return e.key===t}))},getCustomAttributeType:function(t){return this.automationTypes[this.automation.event_name].conditions.find((function(e){return e.key===t})).customAttributeType},getConditionDropdownValues:function(t){var e=this.agents,n=this.allCustomAttributes,a=this.booleanFilterOptions,o=this.campaigns,u=this.contacts,l=this.inboxes,c=this.statusFilterOptions,p=this.teams;return Object(s.g)({agents:e,booleanFilterOptions:a,campaigns:o,contacts:u,customAttributes:n,inboxes:l,statusFilterOptions:c,teams:p,languages:i.a,countries:r.a,type:t})},appendNewCondition:function(){var t;(t=this.automation.conditions).push.apply(t,u(Object(s.j)(this.automation.event_name)))},appendNewAction:function(){var t;(t=this.automation.actions).push.apply(t,u(Object(s.i)()))},removeFilter:function(t){this.automation.conditions.length<=1?this.showAlert(this.$t("AUTOMATION.CONDITION.DELETE_MESSAGE")):this.automation.conditions.splice(t,1)},removeAction:function(t){this.automation.actions.length<=1?this.showAlert(this.$t("AUTOMATION.ACTION.DELETE_MESSAGE")):this.automation.actions.splice(t,1)},submitAutomation:function(){if(this.$v.$touch(),!this.$v.$invalid){var t=Object(s.c)(this.automation);this.$emit("saveAutomation",t,this.mode)}},resetFilter:function(t,e){this.automation.conditions[t].filter_operator=this.automationTypes[this.automation.event_name].conditions.find((function(t){return t.key===e.attribute_key})).filterOperators[0].value,this.automation.conditions[t].values=""},showUserInput:function(t){return!("is_present"===t||"is_not_present"===t)},showActionInput:function(t){return"send_email_to_team"!==t&&"send_message"!==t&&!!this.automationActionTypes.find((function(e){return e.key===t})).inputType},resetAction:function(t){this.automation.actions[t].action_params=[]},manifestConditions:function(t){var e=this,n=Object(s.b)(this.allCustomAttributes);return t.conditions.map((function(a){var o=Object(s.o)(n,a.attribute_key),i="plain_text";return i=o?Object(s.h)(o.type):Object(s.m)(e.automationTypes,t.event_name,a.attribute_key),p(p({},a),{},"plain_text"===i||"date"===i?{values:a.values[0]}:"comma_separated_plain_text"===i?{values:a.values.join(",")}:{query_operator:a.query_operator||"and",values:u(e.getConditionDropdownValues(a.attribute_key)).filter((function(t){return u(a.values).includes(t.id)}))})}))},generateActionsArray:function(t){var e=t.action_params,n=this.automationActionTypes.find((function(e){return e.key===t.action_name})).inputType;return"multi_select"===n||"search_select"===n?u(this.getActionDropdownValues(t.action_name)).filter((function(t){return u(e).includes(t.id)})):"team_message"===n?{team_ids:u(this.getActionDropdownValues(t.action_name)).filter((function(t){return u(e[0].team_ids).includes(t.id)})),message:e[0].message}:u(e)},manifestActions:function(t){var e=this,n=[];return t.actions.map((function(t){return t.action_params.length&&(n=e.generateActionsArray(t)),p(p({},t),{},{action_params:n})}))},formatAutomation:function(t){this.automation=p(p({},t),{},{conditions:this.manifestConditions(t),actions:this.manifestActions(t)})},getActionDropdownValues:function(t){var e=this.agents,n=this.labels,a=this.teams,o=this.slaPolicies;return Object(s.f)({agents:e,labels:n,teams:a,slaPolicies:o,languages:i.a,type:t})},manifestCustomAttributes:function(){var t,e,n,a,o=this.$store.getters["attributes/getAttributesByModel"]("conversation_attribute"),i=this.$store.getters["attributes/getAttributesByModel"]("contact_attribute"),r=Object(s.d)(o,"conversation_attribute"),l=Object(s.d)(i,"contact_attribute"),c=Object(s.e)(r,l,this.$t("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),this.$t("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));(t=this.automationTypes.message_created.conditions).push.apply(t,u(c)),(e=this.automationTypes.conversation_created.conditions).push.apply(e,u(c)),(n=this.automationTypes.conversation_updated.conditions).push.apply(n,u(c)),(a=this.automationTypes.conversation_opened.conditions).push.apply(a,u(c))}}},_=n(65),A={validations:{automation:{name:{required:_.required},description:{required:_.required},event_name:{required:_.required},conditions:{required:_.required,$each:{values:{required:Object(_.requiredIf)((function(t){return!("is_present"===t.filter_operator||"is_not_present"===t.filter_operator)}))}}},actions:{required:_.required,$each:{action_params:{required:Object(_.requiredIf)((function(t){return!("mute_conversation"===t.action_name||"snooze_conversation"===t.action_name||"resolve_conversation"===t.action_name)}))}}}}}},b=n(2740),y=n(2961),v=n(2990),O={message_created:{conditions:[{key:"message_type",name:"Message Type",attributeI18nKey:"MESSAGE_TYPE",inputType:"search_select",filterOperators:v.a},{key:"content",name:"Message Content",attributeI18nKey:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:v.b},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:v.b},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:v.a},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:v.a},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:v.e}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"add_label",name:"Add a label",attributeI18nKey:"ADD_LABEL"},{key:"remove_label",name:"Remove a label",attributeI18nKey:"REMOVE_LABEL"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"resolve_conversation",name:"Resolve conversation",attributeI18nKey:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"Status",attributeI18nKey:"STATUS",inputType:"multi_select",filterOperators:v.a},{key:"browser_language",name:"Browser Language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:v.a},{key:"mail_subject",name:"Email Subject",attributeI18nKey:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:v.b},{key:"country_code",name:"Country",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",filterOperators:v.a},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:v.e},{key:"referer",name:"Referrer Link",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",filterOperators:v.b},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:v.b},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:v.a},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:v.a},{key:"priority",name:"Priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",filterOperators:v.a}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"assign_agent",name:"Assign an agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"resolve_conversation",name:"Resolve conversation",attributeI18nKey:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"Status",attributeI18nKey:"STATUS",inputType:"multi_select",filterOperators:v.a},{key:"browser_language",name:"Browser Language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:v.a},{key:"mail_subject",name:"Email Subject",attributeI18nKey:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:v.b},{key:"country_code",name:"Country",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",filterOperators:v.a},{key:"referer",name:"Referrer Link",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",filterOperators:v.b},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:v.e},{key:"assignee_id",name:"Assignee",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:v.c},{key:"team_id",name:"Team",attributeI18nKey:"TEAM_NAME",inputType:"search_select",filterOperators:v.c},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:v.b},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:v.a},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:v.a},{key:"priority",name:"Priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",filterOperators:v.a}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"assign_agent",name:"Assign an agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"resolve_conversation",name:"Resolve conversation",attributeI18nKey:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"Browser Language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:v.a},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:v.b},{key:"mail_subject",name:"Email Subject",attributeI18nKey:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:v.b},{key:"country_code",name:"Country",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",filterOperators:v.a},{key:"referer",name:"Referrer Link",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",filterOperators:v.b},{key:"assignee_id",name:"Assignee",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:v.c},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:v.e},{key:"team_id",name:"Team",attributeI18nKey:"TEAM_NAME",inputType:"search_select",filterOperators:v.c},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:v.a},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:v.a},{key:"priority",name:"Priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",filterOperators:v.a}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"assign_agent",name:"Assign an agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]}},T=[{key:"conversation_created",value:"Conversation Created"},{key:"conversation_updated",value:"Conversation Updated"},{key:"message_created",value:"Message Created"},{key:"conversation_opened",value:"Conversation Opened"}],f=[{key:"assign_agent",label:"Assign to agent",inputType:"search_select"},{key:"assign_team",label:"Assign a team",inputType:"search_select"},{key:"add_label",label:"Add a label",inputType:"multi_select"},{key:"remove_label",label:"Remove a label",inputType:"multi_select"},{key:"send_email_to_team",label:"Send an email to team",inputType:"team_message"},{key:"send_email_transcript",label:"Send an email transcript",inputType:"email"},{key:"mute_conversation",label:"Mute conversation",inputType:null},{key:"snooze_conversation",label:"Snooze conversation",inputType:null},{key:"resolve_conversation",label:"Resolve conversation",inputType:null},{key:"send_webhook_event",label:"Send Webhook Event",inputType:"url"},{key:"send_attachment",label:"Send Attachment",inputType:"attachment"},{key:"send_message",label:"Send a message",inputType:"textarea"},{key:"change_priority",label:"Change Priority",inputType:"search_select"},{key:"add_sla",label:"Add SLA",inputType:"search_select"}];function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={components:{filterInputBox:b.a,automationActionInput:y.a},mixins:[o.a,d,A],props:{onClose:{type:Function,default:function(){}}},data:function(){return{automationTypes:JSON.parse(JSON.stringify(O)),automationRuleEvent:T[0].key,automationRuleEvents:T,automationMutated:!1,show:!0,automation:{name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create"}},computed:h(h({},Object(a.mapGetters)({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{hasAutomationMutated:function(){return!(!this.automation.conditions[0].values&&!this.automation.actions[0].action_params.length)},automationActionTypes:function(){return this.isFeatureEnabled("sla")?f:f.filter((function(t){return"add_sla"!==t.key}))}}),mounted:function(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes()},methods:{isFeatureEnabled:function(t){return this.isFeatureEnabledonAccount(this.accountId,t)}}},N=(n(3130),n(8)),S=Object(N.a)(I,(function(){var t=this,e=t._self._c;return e("div",[e("woot-modal-header",{attrs:{"header-title":t.$t("AUTOMATION.ADD.TITLE")}}),t._v(" "),e("div",{staticClass:"flex flex-col modal-content"},[e("div",{staticClass:"w-full"},[e("woot-input",{class:{error:t.$v.automation.name.$error},attrs:{label:t.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",error:t.$v.automation.name.$error?t.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},on:{blur:t.$v.automation.name.$touch},model:{value:t.automation.name,callback:function(e){t.$set(t.automation,"name",e)},expression:"automation.name"}}),t._v(" "),e("woot-input",{class:{error:t.$v.automation.description.$error},attrs:{label:t.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",error:t.$v.automation.description.$error?t.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},on:{blur:t.$v.automation.description.$touch},model:{value:t.automation.description,callback:function(e){t.$set(t.automation,"description",e)},expression:"automation.description"}}),t._v(" "),e("div",{staticClass:"event_wrapper"},[e("label",{class:{error:t.$v.automation.event_name.$error}},[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+"\n          "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.automation.event_name,expression:"automation.event_name"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.automation,"event_name",e.target.multiple?n:n[0])},function(e){return t.onEventChange()}]}},t._l(t.automationRuleEvents,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n              "+t._s(n.value)+"\n            ")])})),0),t._v(" "),t.$v.automation.event_name.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.ERROR"))+"\n          ")]):t._e()]),t._v(" "),t.hasAutomationMutated?e("p",{staticClass:"info-message"},[t._v("\n          "+t._s(t.$t("AUTOMATION.FORM.RESET_MESSAGE"))+"\n        ")]):t._e()]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 bg-slate-25 dark:bg-slate-700 rounded-lg border border-solid border-slate-50 dark:border-slate-700 mb-4"},[t._l(t.automation.conditions,(function(n,a){return e("filter-input-box",{key:a,attrs:{"filter-attributes":t.getAttributes(t.automation.event_name),"input-type":t.getInputType(t.automation.conditions[a].attribute_key),operators:t.getOperators(t.automation.conditions[a].attribute_key),"dropdown-values":t.getConditionDropdownValues(t.automation.conditions[a].attribute_key),"show-query-operator":a!==t.automation.conditions.length-1,"custom-attribute-type":t.getCustomAttributeType(t.automation.conditions[a].attribute_key),v:t.$v.automation.conditions.$each[a]},on:{resetFilter:function(e){return t.resetFilter(a,t.automation.conditions[a])},removeFilter:function(e){return t.removeFilter(a)}},model:{value:t.automation.conditions[a],callback:function(e){t.$set(t.automation.conditions,a,e)},expression:"automation.conditions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:t.appendNewCondition}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 bg-slate-25 dark:bg-slate-700 rounded-lg border border-solid border-slate-50 dark:border-slate-700 mb-4"},[t._l(t.automation.actions,(function(n,a){return e("automation-action-input",{key:a,attrs:{"action-types":t.automationActionTypes,"dropdown-values":t.getActionDropdownValues(t.automation.actions[a].action_name),"show-action-input":t.showActionInput(t.automation.actions[a].action_name),v:t.$v.automation.actions.$each[a]},on:{resetAction:function(e){return t.resetAction(a)},removeAction:function(e){return t.removeAction(a)}},model:{value:t.automation.actions[a],callback:function(e){t.$set(t.automation.actions,a,e)},expression:"automation.actions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:t.appendNewAction}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"))+"\n          ")]),t._v(" "),e("woot-button",{on:{click:t.submitAutomation}},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.SUBMIT"))+"\n          ")])],1)])],1)])],1)}),[],!1,null,"75e0a7e0",null),k=S.exports;function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R={components:{filterInputBox:b.a,automationActionInput:y.a},mixins:[o.a,d,A],props:{onClose:{type:Function,default:function(){}},selectedResponse:{type:Object,default:function(){}}},data:function(){return{automationTypes:JSON.parse(JSON.stringify(O)),automationRuleEvent:T[0].key,automationRuleEvents:T,automationMutated:!1,show:!0,automation:null,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit"}},computed:M(M({},Object(a.mapGetters)({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{hasAutomationMutated:function(){return!(!this.automation.conditions[0].values&&!this.automation.actions[0].action_params.length)},automationActionTypes:function(){return this.isFeatureEnabled("sla")?f:f.filter((function(t){return"add_sla"!==t.key}))}}),mounted:function(){this.manifestCustomAttributes(),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.formatAutomation(this.selectedResponse)},methods:{isFeatureEnabled:function(t){return this.isFeatureEnabledonAccount(this.accountId,t)}}},D=(n(3131),Object(N.a)(R,(function(){var t=this,e=t._self._c;return e("div",[e("woot-modal-header",{attrs:{"header-title":t.$t("AUTOMATION.EDIT.TITLE")}}),t._v(" "),e("div",{staticClass:"flex flex-col modal-content"},[t.automation?e("div",{staticClass:"w-full"},[e("woot-input",{class:{error:t.$v.automation.name.$error},attrs:{label:t.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",error:t.$v.automation.name.$error?t.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},on:{blur:t.$v.automation.name.$touch},model:{value:t.automation.name,callback:function(e){t.$set(t.automation,"name",e)},expression:"automation.name"}}),t._v(" "),e("woot-input",{class:{error:t.$v.automation.description.$error},attrs:{label:t.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",error:t.$v.automation.description.$error?t.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},on:{blur:t.$v.automation.description.$touch},model:{value:t.automation.description,callback:function(e){t.$set(t.automation,"description",e)},expression:"automation.description"}}),t._v(" "),e("div",{staticClass:"event_wrapper"},[e("label",{class:{error:t.$v.automation.event_name.$error}},[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+"\n          "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.automation.event_name,expression:"automation.event_name"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.automation,"event_name",e.target.multiple?n:n[0])},function(e){return t.onEventChange()}]}},t._l(t.automationRuleEvents,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n              "+t._s(n.value)+"\n            ")])})),0),t._v(" "),t.$v.automation.event_name.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.ERROR"))+"\n          ")]):t._e()])]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 bg-slate-25 dark:bg-slate-700 rounded-lg border border-solid border-slate-50 dark:border-slate-700 mb-4"},[t._l(t.automation.conditions,(function(n,a){return e("filter-input-box",{key:a,attrs:{"filter-attributes":t.getAttributes(t.automation.event_name),"input-type":t.getInputType(t.automation.conditions[a].attribute_key),operators:t.getOperators(t.automation.conditions[a].attribute_key),"dropdown-values":t.getConditionDropdownValues(t.automation.conditions[a].attribute_key),"custom-attribute-type":t.getCustomAttributeType(t.automation.conditions[a].attribute_key),"show-query-operator":a!==t.automation.conditions.length-1,v:t.$v.automation.conditions.$each[a]},on:{resetFilter:function(e){return t.resetFilter(a,t.automation.conditions[a])},removeFilter:function(e){return t.removeFilter(a)}},model:{value:t.automation.conditions[a],callback:function(e){t.$set(t.automation.conditions,a,e)},expression:"automation.conditions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:t.appendNewCondition}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 bg-slate-25 dark:bg-slate-700 rounded-lg border border-solid border-slate-50 dark:border-slate-700 mb-4"},[t._l(t.automation.actions,(function(n,a){return e("automation-action-input",{key:a,attrs:{"action-types":t.automationActionTypes,"dropdown-values":t.getActionDropdownValues(n.action_name),"show-action-input":t.showActionInput(n.action_name),v:t.$v.automation.actions.$each[a],"initial-file-name":t.getFileName(n,t.automation.files)},on:{resetAction:function(e){return t.resetAction(a)},removeAction:function(e){return t.removeAction(a)}},model:{value:t.automation.actions[a],callback:function(e){t.$set(t.automation.actions,a,e)},expression:"automation.actions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:t.appendNewAction}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{staticClass:"button",attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"))+"\n          ")]),t._v(" "),e("woot-button",{on:{click:t.submitAutomation}},[t._v("\n            "+t._s(t.$t("AUTOMATION.EDIT.SUBMIT"))+"\n          ")])],1)])],1):t._e()])],1)}),[],!1,null,"ecb536c6",null)),$=D.exports,L=n(1915);function P(t,e,n,a,o,i,r){try{var s=t[i](r),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(a,o)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function r(t){P(i,a,o,r,s,"next",t)}function s(t){P(i,a,o,r,s,"throw",t)}r(void 0)}))}}function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F={components:{AddAutomationRule:k,EditAutomationRule:$},mixins:[o.a,L.a],data:function(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedResponse:{},toggleModalTitle:this.$t("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),toggleModalDescription:this.$t("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")}},computed:j(j({},Object(a.mapGetters)({records:["automations/getAutomations"],uiFlags:"automations/getUIFlags",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{deleteConfirmText:function(){return"".concat(this.$t("AUTOMATION.DELETE.CONFIRM.YES")," ").concat(this.selectedResponse.name)},deleteRejectText:function(){return"".concat(this.$t("AUTOMATION.DELETE.CONFIRM.NO")," ").concat(this.selectedResponse.name)},deleteMessage:function(){return" ".concat(this.selectedResponse.name,"?")},isSLAEnabled:function(){return this.isFeatureEnabledonAccount(this.accountId,"sla")}}),mounted:function(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.$store.dispatch("automations/get"),this.isSLAEnabled&&this.$store.dispatch("sla/get")},methods:{openAddPopup:function(){this.showAddPopup=!0},hideAddPopup:function(){this.showAddPopup=!1},openEditPopup:function(t){this.selectedResponse=t,this.showEditPopup=!0},hideEditPopup:function(){this.showEditPopup=!1},openDeletePopup:function(t){this.showDeleteConfirmationPopup=!0,this.selectedResponse=t},closeDeletePopup:function(){this.showDeleteConfirmationPopup=!1},confirmDeletion:function(){this.loading[this.selectedResponse.id]=!0,this.closeDeletePopup(),this.deleteAutomation(this.selectedResponse.id)},deleteAutomation:function(t){var e=this;return x(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("automations/delete",t);case 3:e.showAlert(e.$t("AUTOMATION.DELETE.API.SUCCESS_MESSAGE")),e.loading[e.selectedResponse.id]=!1,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showAlert(e.$t("AUTOMATION.DELETE.API.ERROR_MESSAGE"));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},cloneAutomation:function(t){var e=this;return x(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("automations/clone",t);case 3:e.showAlert(e.$t("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),e.$store.dispatch("automations/get"),e.loading[e.selectedResponse.id]=!1,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),e.showAlert(e.$t("AUTOMATION.CLONE.API.ERROR_MESSAGE"));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},submitAutomation:function(t,e){var n=this;return x(regeneratorRuntime.mark((function a(){var o,i,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o="edit"===e?"automations/update":"automations/create",i="edit"===e?n.$t("AUTOMATION.EDIT.API.SUCCESS_MESSAGE"):n.$t("AUTOMATION.ADD.API.SUCCESS_MESSAGE"),a.next=5,n.$store.dispatch(o,t);case 5:n.showAlert(i),n.hideAddPopup(),n.hideEditPopup(),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),r="edit"===e?n.$t("AUTOMATION.EDIT.API.ERROR_MESSAGE"):n.$t("AUTOMATION.ADD.API.ERROR_MESSAGE"),n.showAlert(r);case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},toggleAutomation:function(t,e){var n=this;return x(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n.toggleModalTitle=e?n.$t("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"):n.$t("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),n.toggleModalDescription=e?n.$t("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:t.name}):n.$t("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:t.name}),a.next=5,n.$refs.confirmDialog.showConfirmation();case 5:if(!a.sent){a.next=11;break}return a.next=9,n.$store.dispatch("automations/update",{id:t.id,active:!e});case 9:o=e?n.$t("AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL"):n.$t("AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL"),n.showAlert(o);case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),n.showAlert(n.$t("AUTOMATION.EDIT.API.ERROR_MESSAGE"));case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},readableTime:function(t){return this.messageStamp(new Date(t),"LLL d, h:mm a")}}},G=Object(N.a)(F,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 overflow-auto p-4"},[e("woot-button",{attrs:{"color-scheme":"success","class-names":"button--fixed-top",icon:"add-circle"},on:{click:function(e){return t.openAddPopup()}}},[t._v("\n    "+t._s(t.$t("AUTOMATION.HEADER_BTN_TXT"))+"\n  ")]),t._v(" "),e("div",{staticClass:"flex flex-row gap-4"},[e("div",{staticClass:"w-full lg:w-3/5"},[t.uiFlags.isFetching||t.records.length?t._e():e("p",{staticClass:"flex h-full items-center flex-col justify-center"},[t._v("\n        "+t._s(t.$t("AUTOMATION.LIST.404"))+"\n      ")]),t._v(" "),t.uiFlags.isFetching?e("woot-loading-state",{attrs:{message:t.$t("AUTOMATION.LOADING")}}):t._e(),t._v(" "),!t.uiFlags.isFetching&&t.records.length?e("table",{staticClass:"woot-table"},[e("thead",t._l(t.$t("AUTOMATION.LIST.TABLE_HEADER"),(function(n){return e("th",{key:n},[t._v("\n            "+t._s(n)+"\n          ")])})),0),t._v(" "),e("tbody",t._l(t.records,(function(n,a){return e("tr",{key:a},[e("td",[t._v(t._s(n.name))]),t._v(" "),e("td",[t._v(t._s(n.description))]),t._v(" "),e("td",[e("woot-switch",{attrs:{value:n.active},on:{input:function(e){return t.toggleAutomation(n,n.active)}}})],1),t._v(" "),e("td",[t._v(t._s(t.readableTime(n.created_on)))]),t._v(" "),e("td",{staticClass:"button-wrapper"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("AUTOMATION.FORM.EDIT"),expression:"$t('AUTOMATION.FORM.EDIT')",modifiers:{top:!0}}],attrs:{variant:"smooth",size:"tiny","color-scheme":"secondary","class-names":"grey-btn","is-loading":t.loading[n.id],icon:"edit"},on:{click:function(e){return t.openEditPopup(n)}}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("AUTOMATION.CLONE.TOOLTIP"),expression:"$t('AUTOMATION.CLONE.TOOLTIP')",modifiers:{top:!0}}],attrs:{variant:"smooth",size:"tiny","color-scheme":"primary","class-names":"grey-btn","is-loading":t.loading[n.id],icon:"copy"},on:{click:function(e){return t.cloneAutomation(n.id)}}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("AUTOMATION.FORM.DELETE"),expression:"$t('AUTOMATION.FORM.DELETE')",modifiers:{top:!0}}],attrs:{variant:"smooth","color-scheme":"alert",size:"tiny",icon:"dismiss-circle","class-names":"grey-btn","is-loading":t.loading[n.id]},on:{click:function(e){return t.openDeletePopup(n,a)}}})],1)])})),0)]):t._e()],1),t._v(" "),e("div",{staticClass:"hidden lg:block w-1/3"},[e("span",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.$t("AUTOMATION.SIDEBAR_TXT"),expression:"$t('AUTOMATION.SIDEBAR_TXT')"}]})])]),t._v(" "),e("woot-modal",{attrs:{show:t.showAddPopup,size:"medium","on-close":t.hideAddPopup},on:{"update:show":function(e){t.showAddPopup=e}}},[t.showAddPopup?e("add-automation-rule",{attrs:{"on-close":t.hideAddPopup},on:{saveAutomation:t.submitAutomation}}):t._e()],1),t._v(" "),e("woot-delete-modal",{attrs:{show:t.showDeleteConfirmationPopup,"on-close":t.closeDeletePopup,"on-confirm":t.confirmDeletion,title:t.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":t.deleteMessage,"confirm-text":t.deleteConfirmText,"reject-text":t.deleteRejectText},on:{"update:show":function(e){t.showDeleteConfirmationPopup=e}}}),t._v(" "),e("woot-modal",{attrs:{show:t.showEditPopup,size:"medium","on-close":t.hideEditPopup},on:{"update:show":function(e){t.showEditPopup=e}}},[t.showEditPopup?e("edit-automation-rule",{attrs:{"on-close":t.hideEditPopup,"selected-response":t.selectedResponse},on:{saveAutomation:t.submitAutomation}}):t._e()],1),t._v(" "),e("woot-confirm-modal",{ref:"confirmDialog",attrs:{title:t.toggleModalTitle,description:t.toggleModalDescription}})],1)}),[],!1,null,null,null);e.default=G.exports}}]);
//# sourceMappingURL=56-78c437c955858d86794a.chunk.js.map