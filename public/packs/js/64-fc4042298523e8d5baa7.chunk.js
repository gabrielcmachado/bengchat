(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{2744:function(t,e,o){},2845:function(t,e,o){"use strict";o(2744)},2976:function(t,e,o){"use strict";o(56),o(62);var n={props:{text:{type:String,default:""},limit:{type:Number,default:120}},data:function(){return{showMore:!1}},computed:{textToBeDisplayed:function(){return this.showMore||this.text.length<=this.limit?this.text:this.text.slice(0,this.limit)+"..."},buttonLabel:function(){var t=this.showMore?"SHOW_LESS":"SHOW_MORE";return this.$t("COMPONENTS.SHOW_MORE_BLOCK.".concat(t))}},methods:{toggleShowMore:function(){this.showMore=!this.showMore}}},r=(o(2845),o(8)),s=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("span",[t._v("\n  "+t._s(t.textToBeDisplayed)+"\n  "),t.text.length>t.limit?e("button",{staticClass:"show-more--button",on:{click:t.toggleShowMore}},[t._v("\n    "+t._s(t.buttonLabel)+"\n  ")]):t._e()])}),[],!1,null,"df531410",null);e.a=s.exports},3018:function(t,e,o){},3154:function(t,e,o){"use strict";o(3018)},3345:function(t,e,o){"use strict";o.r(e);o(13),o(9),o(11),o(15),o(12),o(16),o(10),o(27),o(37);var n=o(30),r=o(75),s=o(275),i=o(65),a={methods:{getEventLabel:function(t){var e=t.toUpperCase();return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS.".concat(e))}}},u=o(93).b.EXAMPLE_WEBHOOK_URL,c=["conversation_created","conversation_status_changed","conversation_updated","message_created","message_updated","webwidget_triggered","contact_created","contact_updated"],l={mixins:[a],props:{value:{type:Object,default:function(){return{}}},isSubmitting:{type:Boolean,default:!1},submitLabel:{type:String,required:!0}},validations:{url:{required:i.required,minLength:Object(i.minLength)(7),url:i.url},subscriptions:{required:i.required}},data:function(){return{url:this.value.url||"",subscriptions:this.value.subscriptions||[],supportedWebhookEvents:c}},computed:{webhookURLInputPlaceholder:function(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.PLACEHOLDER",{webhookExampleURL:u})}},methods:{onSubmit:function(){this.$emit("submit",{url:this.url,subscriptions:this.subscriptions})}}},p=(o(3154),o(8)),d=Object(p.a)(l,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"flex flex-col w-full",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.url.$error}},[t._v("\n      "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.LABEL"))+"\n      "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.url,expression:"url",modifiers:{trim:!0}}],attrs:{type:"text",name:"url",placeholder:t.webhookURLInputPlaceholder},domProps:{value:t.url},on:{input:[function(e){e.target.composing||(t.url=e.target.value.trim())},t.$v.url.$touch],blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.url.$error?e("span",{staticClass:"message"},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.ERROR"))+"\n      ")]):t._e()]),t._v(" "),e("label",{staticClass:"mb-2",class:{error:t.$v.url.$error}},[t._v("\n      "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.LABEL"))+"\n    ")]),t._v(" "),e("div",{staticClass:"flex flex-col gap-2.5 mb-4"},t._l(t.supportedWebhookEvents,(function(o){return e("div",{key:o,staticClass:"flex items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.subscriptions,expression:"subscriptions"}],staticClass:"checkbox",attrs:{id:o,type:"checkbox",name:"subscriptions"},domProps:{value:o,checked:Array.isArray(t.subscriptions)?t._i(t.subscriptions,o)>-1:t.subscriptions},on:{change:function(e){var n=t.subscriptions,r=e.target,s=!!r.checked;if(Array.isArray(n)){var i=o,a=t._i(n,i);r.checked?a<0&&(t.subscriptions=n.concat([i])):a>-1&&(t.subscriptions=n.slice(0,a).concat(n.slice(a+1)))}else t.subscriptions=s}}}),t._v(" "),e("label",{staticClass:"text-sm",attrs:{for:o}},[t._v("\n          "+t._s(`${t.getEventLabel(o)} (${o})`)+"\n        ")])])})),0)]),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("div",{staticClass:"w-full"},[e("woot-button",{attrs:{disabled:t.$v.$invalid||t.isSubmitting,"is-loading":t.isSubmitting}},[t._v("\n        "+t._s(t.submitLabel)+"\n      ")]),t._v(" "),e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.$emit("cancel")}}},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.CANCEL"))+"\n      ")])],1)])])}),[],!1,null,"56262a39",null),E=d.exports;function h(t,e,o,n,r,s,i){try{var a=t[s](i),u=a.value}catch(c){return void o(c)}a.done?e(u):Promise.resolve(u).then(n,r)}function O(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function b(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var f={components:{WebhookForm:E},mixins:[r.a,s.a],props:{onClose:{type:Function,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?O(Object(o),!0).forEach((function(e){b(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},Object(n.mapGetters)({globalConfig:"globalConfig/get",uiFlags:"webhooks/getUIFlags"})),methods:{onSubmit:function(t){var e,o=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.$store.dispatch("webhooks/create",{webhook:t});case 3:o.showAlert(o.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.API.SUCCESS_MESSAGE")),o.onClose(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response.data.message||o.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE"),o.showAlert(n);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,o=arguments;return new Promise((function(n,r){var s=e.apply(t,o);function i(t){h(s,n,r,i,a,"next",t)}function a(t){h(s,n,r,i,a,"throw",t)}i(void 0)}))})()}}},T=f,m=Object(p.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.TITLE"),"header-content":t.useInstallationName(t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.DESC"),t.globalConfig.installationName)}}),t._v(" "),e("webhook-form",{attrs:{"is-submitting":t.uiFlags.creatingItem,"submit-label":t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.ADD_SUBMIT")},on:{submit:t.onSubmit,cancel:t.onClose}})],1)}),[],!1,null,null,null).exports;o(56);function v(t,e,o,n,r,s,i){try{var a=t[s](i),u=a.value}catch(c){return void o(c)}a.done?e(u):Promise.resolve(u).then(n,r)}function w(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function I(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var _={components:{WebhookForm:E},mixins:[r.a],props:{value:{type:Object,required:!0},id:{type:[Number,String],required:!0},onClose:{type:Function,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?w(Object(o),!0).forEach((function(e){I(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},Object(n.mapGetters)({uiFlags:"webhooks/getUIFlags"})),methods:{onSubmit:function(t){var e,o=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.$store.dispatch("webhooks/update",{webhook:t,id:o.id});case 3:o.showAlert(o.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.SUCCESS_MESSAGE")),o.onClose(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response.data.message||o.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE"),o.showAlert(n);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,o=arguments;return new Promise((function(n,r){var s=e.apply(t,o);function i(t){v(s,n,r,i,a,"next",t)}function a(t){v(s,n,r,i,a,"throw",t)}i(void 0)}))})()}}},N=_,S=Object(p.a)(N,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.TITLE")}}),t._v(" "),e("webhook-form",{attrs:{value:t.value,"is-submitting":t.uiFlags.updatingItem,"submit-label":t.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.EDIT_SUBMIT")},on:{submit:t.onSubmit,cancel:t.onClose}})],1)}),[],!1,null,null,null).exports,g=(o(322),o(73),{components:{ShowMore:o(2976).a},mixins:[a],props:{webhook:{type:Object,required:!0},index:{type:Number,required:!0}},computed:{subscribedEvents:function(){var t=this;return this.webhook.subscriptions.map((function(e){return t.getEventLabel(e)})).join(", ")}}});function P(t,e,o,n,r,s,i){try{var a=t[s](i),u=a.value}catch(c){return void o(c)}a.done?e(u):Promise.resolve(u).then(n,r)}function A(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function R(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var x={components:{NewWebhook:m,EditWebhook:S,WebhookRow:Object(p.a)(g,(function(){var t=this,e=t._self._c;return e("tr",{staticClass:"space-x-2"},[e("td",{staticClass:"max-w-2xl"},[e("div",{staticClass:"font-medium break-words text-slate-700 dark:text-slate-100"},[t._v("\n      "+t._s(t.webhook.url)+"\n    ")]),t._v(" "),e("span",{staticClass:"text-xs text-slate-500 dark:text-slate-400"},[e("span",{staticClass:"font-medium"},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.SUBSCRIBED_EVENTS"))+":\n      ")]),t._v(" "),e("show-more",{attrs:{text:t.subscribedEvents,limit:60}})],1)]),t._v(" "),e("td",{staticClass:"min-w-[7rem] flex gap-1 justify-end flex-shrink-0"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT"),expression:"$t('INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT')",modifiers:{top:!0}}],attrs:{variant:"smooth",size:"tiny","color-scheme":"secondary",icon:"edit"},on:{click:function(e){return t.$emit("edit",t.webhook)}}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),expression:"$t('INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT')",modifiers:{top:!0}}],attrs:{variant:"smooth","color-scheme":"alert",size:"tiny",icon:"dismiss-circle"},on:{click:function(e){return t.$emit("delete",t.webhook,t.index)}}})],1)])}),[],!1,null,null,null).exports},mixins:[r.a,s.a],data:function(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedWebHook:{}}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?A(Object(o),!0).forEach((function(e){R(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},Object(n.mapGetters)({records:"webhooks/getWebhooks",uiFlags:"webhooks/getUIFlags",globalConfig:"globalConfig/get"})),mounted:function(){this.$store.dispatch("webhooks/get")},methods:{openAddPopup:function(){this.showAddPopup=!0},hideAddPopup:function(){this.showAddPopup=!1},openDeletePopup:function(t){this.showDeleteConfirmationPopup=!0,this.selectedWebHook=t},closeDeletePopup:function(){this.showDeleteConfirmationPopup=!1},openEditPopup:function(t){this.showEditPopup=!0,this.selectedWebHook=t},hideEditPopup:function(){this.showEditPopup=!1},confirmDeletion:function(){this.loading[this.selectedWebHook.id]=!0,this.closeDeletePopup(),this.deleteWebhook(this.selectedWebHook.id)},deleteWebhook:function(t){var e,o=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.$store.dispatch("webhooks/delete",t);case 3:o.showAlert(o.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.SUCCESS_MESSAGE")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o.showAlert(o.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,o=arguments;return new Promise((function(n,r){var s=e.apply(t,o);function i(t){P(s,n,r,i,a,"next",t)}function a(t){P(s,n,r,i,a,"throw",t)}i(void 0)}))})()}}},y=x,G=Object(p.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-4 overflow-auto"},[e("woot-button",{attrs:{"color-scheme":"success","class-names":"button--fixed-top",icon:"add-circle"},on:{click:t.openAddPopup}},[t._v("\n    "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.HEADER_BTN_TXT"))+"\n  ")]),t._v(" "),e("div",{staticClass:"flex flex-row gap-4"},[e("div",{staticClass:"w-full lg:w-3/5"},[t.uiFlags.fetchingList||t.records.length?t._e():e("p",{staticClass:"flex flex-col items-center justify-center h-full"},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.404"))+"\n      ")]),t._v(" "),t.uiFlags.fetchingList?e("woot-loading-state",{attrs:{message:t.$t("INTEGRATION_SETTINGS.WEBHOOK.LOADING")}}):t._e(),t._v(" "),!t.uiFlags.fetchingList&&t.records.length?e("table",{staticClass:"woot-table"},[e("thead",t._l(t.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER"),(function(o){return e("th",{key:o,staticClass:"last:text-right"},[t._v("\n            "+t._s(o)+"\n          ")])})),0),t._v(" "),e("tbody",t._l(t.records,(function(o,n){return e("webhook-row",{key:o.id,attrs:{index:n,webhook:o},on:{edit:t.openEditPopup,delete:t.openDeletePopup}})})),1)]):t._e()],1),t._v(" "),e("div",{staticClass:"hidden w-1/3 lg:block"},[e("span",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.useInstallationName(t.$t("INTEGRATION_SETTINGS.WEBHOOK.SIDEBAR_TXT"),t.globalConfig.installationName),expression:"\n          useInstallationName(\n            $t('INTEGRATION_SETTINGS.WEBHOOK.SIDEBAR_TXT'),\n            globalConfig.installationName\n          )\n        "}]})])]),t._v(" "),e("woot-modal",{attrs:{show:t.showAddPopup,"on-close":t.hideAddPopup},on:{"update:show":function(e){t.showAddPopup=e}}},[t.showAddPopup?e("new-webhook",{attrs:{"on-close":t.hideAddPopup}}):t._e()],1),t._v(" "),e("woot-modal",{attrs:{show:t.showEditPopup,"on-close":t.hideEditPopup},on:{"update:show":function(e){t.showEditPopup=e}}},[t.showEditPopup?e("edit-webhook",{attrs:{id:t.selectedWebHook.id,value:t.selectedWebHook,"on-close":t.hideEditPopup}}):t._e()],1),t._v(" "),e("woot-delete-modal",{attrs:{show:t.showDeleteConfirmationPopup,"on-close":t.closeDeletePopup,"on-confirm":t.confirmDeletion,title:t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),message:t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE",{webhookURL:t.selectedWebHook.url}),"confirm-text":t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"reject-text":t.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO")},on:{"update:show":function(e){t.showDeleteConfirmationPopup=e}}})],1)}),[],!1,null,null,null);e.default=G.exports}}]);
//# sourceMappingURL=64-fc4042298523e8d5baa7.chunk.js.map